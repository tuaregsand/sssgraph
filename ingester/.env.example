# LaserStream ingester environment template (external/managed services)

# Helius Yellowstone gRPC endpoints (comma-separated for failover)
HELIUS_GRPC_ENDPOINTS=https://grpc-mainnet.helius-rpc.com,https://grpc-ny.helius.xyz
HELIUS_X_TOKEN=replace-with-helius-token

# Program subscriptions (comma-separated)
PROGRAM_IDS=11111111111111111111111111111111
LASERSTREAM_COMMITMENT=processed

# IDL repository (PostgreSQL)
# NOTE: Current ingester build uses non-TLS Postgres connection.
# For managed Postgres, use a private endpoint/tunnel or a TLS terminator and keep sslmode=disable.
PG_DSN=postgres://laserstream_app:replace-me@your-postgres-host.example.com:5432/laserstream?sslmode=disable
IDL_REFRESH_SECONDS=30

# Agent webhook fanout (backed by PostgreSQL table `agent_webhooks`)
AGENT_WEBHOOKS_ENABLED=true
# Optional override if webhook routes live in a different Postgres than PG_DSN:
AGENT_WEBHOOKS_PG_DSN=
AGENT_WEBHOOKS_REFRESH_SECONDS=30
AGENT_WEBHOOK_TIMEOUT_MS=5000
AGENT_WEBHOOK_MAX_ATTEMPTS=2
AGENT_WEBHOOK_RETRY_INITIAL_BACKOFF_MS=200
# Optional legacy single-destination fallback:
AGENT_WEBHOOK_URL=

# Stream reconnect / keepalive
RECONNECT_INITIAL_SECONDS=1
RECONNECT_MAX_SECONDS=30
GEYSER_PING_SECONDS=15

# Redpanda Kafka REST Proxy (Pandaproxy)
REDPANDA_REST_PROXY_URL=https://your-redpanda-proxy.example.com
REDPANDA_TOPIC=solana.events
REDPANDA_PUBLISH_TIMEOUT_MS=5000
PUBLISH_MAX_ATTEMPTS=3
PUBLISH_RETRY_INITIAL_BACKOFF_MS=200

# DLQ + replay
DLQ_ENABLED=true
DLQ_PATH=./dlq/events.jsonl
DLQ_REPLAY_INTERVAL_SECONDS=30
DLQ_REPLAY_BATCH_SIZE=200
DLQ_ALERT_THRESHOLD=200
# Optional alert destination (Slack/Discord/etc webhook)
ALERT_WEBHOOK_URL=
